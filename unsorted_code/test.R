test=function(index,vet,n) {
	indices=c((index-n):(index-1), (index+1):(index+n))
	indices=indices[indices>0&indices<(length(vet))]
	response=((!any(vet[indices]>vet[index]))&length(indices)==(n*2))
	return(response)
	}

#questo Ã¨ il vettore degli ERP
vet=c(-0.256752, -0.3143017, -0.3519622, -0.3875512, -0.439071, -0.518118, 
-0.6271755, -0.7609665, -0.9100489, -1.064166, -1.213643, -1.348818, 
-1.459031, -1.533092, -1.562244, -1.54487, -1.490682, -1.42175, 
-1.368862, -1.363799, -1.43016, -1.576302, -1.793257, -2.058441, 
-2.34359, -2.623701, -2.883561, -3.119729, -3.33784, -3.546944, 
-3.753447, -3.956929, -4.148943, -4.314687, -4.436433, -4.497602, 
-4.486398, -4.398408, -4.237845, -4.017057, -3.754253, -3.469581, 
-3.18053, -2.898087, -2.625256, -2.358806, -2.093825, -1.829117, 
-1.570818, -1.331956, -1.12749, -0.9665526, -0.8453445, -0.7444082, 
-0.6323751, -0.4755217, -0.2496491, 0.05060085, 0.4092008, 0.7944321, 
1.170817, 1.512509, 1.812651, 2.084903, 2.356644, 2.656877, 3.003948, 
3.398024, 3.821009, 4.24329, 4.634006, 4.970436, 5.243062, 5.45512, 
5.617978, 5.745123, 5.847544, 5.932017, 6.001955)

# creo un data.frame con gli indici. Mi serve per utilizzare la funzione apply.
prova=data.frame(index=1:length(vet))



a=apply(prova, 1, function(x){test(index=x, vet, 5)})